Class {
	#name : #RSForceBasedLayoutTest,
	#superclass : #RSTest,
	#instVars : [
		'canvas',
		'boxes'
	],
	#category : #'Roassal3-Global-Tests-Layouts'
}

{ #category : #running }
RSForceBasedLayoutTest >> setUp [
	super setUp.
	canvas := RSCanvas new.
	boxes := RSBox models: (10 to: 50).
	RSLineBuilder line
		canvas: canvas;
		shapes: boxes;
		color: (Color blue alpha: 0.5);
		connectFrom: [ :nb | nb // 2 ].
	canvas addAll: boxes
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAddNodesAndEdges [

	RSForceBasedLayout new
		start;
		addNodes: boxes;
		addLines: canvas edges;
		step.

	self assert: (boxes collect: #position as: Array) equals: {(204.1381767192054@ -34.65975567128365). (41.6086750973881@ -330.64514821559214). (-437.64121980646655@138.4449837721012). (629.106833418821@ -213.35229450714166). (-171.26791462481438@ -114.27272445604714). (165.05247082344806@ -170.18306072876882). (-143.86418278241095@179.70435711976). (-45.14813741792285@348.1141409355912). (526.169880616215@ -88.70743211410085). (176.3244614439574@ -83.50029028072399). (-332.02040632080855@124.43126055068214). (-68.861761464375@402.1189842427126). (-93.64122655285627@134.0071205210135). (209.0701564771561@46.16793117345678). (-145.88222068511843@ -187.856251669607). (-245.59594460619587@ -998.5852435459608). (69.17634804610802@ -389.22699598484235). (-81.058777229675@ -266.8242152617776). (-239.1677329629107@387.38247425908116). (-298.244019432684@ -478.6636378594302). (554.2864294374763@ -345.0449450754109). (83.77169882312965@307.80828092151535). (154.51065837660113@124.67245322480098). (-97.78774438677755@119.71040238490563). (-114.84373567808449@ -196.79917392925398). (-2630.492471838436@5619.89941797112). (287.8792223887767@22.99051914576157). (69.19603469859378@ -352.6677751569359). (148.3754047315037@ -205.04539909521708). (35.46378454321605@265.52467506793124). (-148.93212453920935@147.7573881438297). (-332.82400226848773@ -126.40573430977705). (-289.8209003737269@ -230.8639904888284). (263.2113898041367@11.242914359614108). (-145.73522573503845@149.16645846308464). (166.65319011541882@ -578.7962139728857). (218.49866543137253@34.42504672803043). (-170.65430176680417@ -392.4494042748909). (300.0018302573603@ -200.09384102093748). (-223.95997500210785@42.27475866338375). (472.45208863125396@1527.2444661739955)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAttributes [
	RSForceBasedLayout new
		length: 100;
		charge: -300;
		center: 200@200;
		on: boxes.

	self assert: (boxes collect: #position as: Array) equals: {(181.36169178662738@36.316036454042305). (340.716801610261@305.81832193719885). (8.50433539059589@310.7758161932311). (76.6516959166559@ -59.20475956937193). (333.6392914905099@ -76.53121743449714). (263.90419253156705@43.30650708072338). (479.08098170547817@117.38058991830584). (19.30011840177135@215.11746164041105). (203.9447059384078@362.26518768239345). (-67.94956534700167@92.53296143356859). (80.86446278264185@30.812714389684714). (228.89468545328134@128.6801766266105). (443.14374760712377@309.6187351195402). (293.46210945645413@397.12700049212526). (18.26183616653404@410.2180519415626). (105.85124037828402@331.70588495391644). (-9.444718869615206@ -7.95578781723829). (168.52752072462545@ -96.02346541513958). (337.92969751526084@21.5226944733643). (414.3794328985994@ -12.338360667688402). (356.4263152004545@85.6821006093476). (235.51798720811172@ -53.33841718169906). (384.3257723829778@150.64698612030801). (427.44137110530437@205.82236333110282). (112.33398609252319@250.84524565444843). (11.302715417781338@112.99963840895114). (203.17108943679037@463.53319161963645). (257.45213393823514@279.0757253876397). (-113.9100226736106@183.9273722260484). (-53.05852092210428@195.44012877251865). (83.96151223730722@133.52046721416698). (146.23502510635467@107.5108048395725). (191.55980232320624@221.6610884058037). (300.90450241790643@198.35108684028563). (501.8854617267401@229.15858480867703). (427.0163771585679@411.03433395620215). (283.60696991667714@495.39085533153735). (385.85636952335983@365.04696864445873). (-61.418341798452914@349.10829410682754). (83.76423188596154@485.1752612604357). (131.3324580558331@426.86864604934004)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAutoRepulse [
	self assert: RSForceBasedLayout new autoRepulse equals: false.
	RSForceBasedLayout new
		autoRepulse: true;
		on: boxes.

	self assert: (boxes collect: #position as: Array) equals: {(0.889897903270647@ -26.64950618107099). (36.789778253524084@49.42621842228547). (-40.85950835555051@35.533490168858094). (-23.954627132264314@ -71.27472748447899). (49.58827498691415@ -52.80088255971976). (17.87614168165759@ -55.75505686471987). (61.87648734703305@ -0.9076901998445767). (-60.5091564515173@ -37.68032357780954). (4.896025624083695@21.1931800643391). (-68.06874847265544@2.5223581824636616). (-10.951498331656955@ -37.28323120477288). (4.297688603124512@ -11.052973390226192). (51.920939775077336@45.6269505152328). (21.923903211386914@54.90579786747414). (-42.02055569669671@51.840884764740245). (-27.831612602948724@26.334088383681074). (-38.53640151040798@ -65.53114745133016). (-8.746555941058311@ -73.94644589750672). (49.53660675690446@ -36.71773319395541). (63.859851991715566@ -46.556029126764585). (24.7974672940329@ -41.92154739527213). (21.815172466870894@ -70.36796693436904). (76.00557956197717@ -5.405135878363031). (47.118617816183146@ -3.175014189825418). (-71.11995162800334@ -26.33917108681172). (-51.14899405282955@ -24.968832025299193). (1.1538900254637785@36.105209875955424). (20.345979951088417@18.52808970034326). (-71.76456282043816@17.44421857429005). (-52.56778893889752@4.419384904642408). (-25.358670899184528@ -43.585313480262336). (-22.61995878864715@ -25.78342536811189). (-8.88172375558412@ -1.924273621283506). (20.143996985233866@ -9.18910150273737). (65.64770779499827@37.68004157688667). (50.079217793732056@29.651096079372053). (8.163918670283628@63.168700650713966). (25.962191094343886@70.08263223784023). (-57.51760240762769@49.80167488184632). (-32.208912828349256@64.48141989235883). (-20.391917700674068@40.633477772824314)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic [
	RSForceBasedLayout new
		doNotUseProgressBar;
		on: boxes.

	self assert: (boxes collect: #position as: Array) equals: {(0.454927162200802@ -44.54221403928398). (53.37581092890057@27.670211543492943). (-56.2859815804936@37.029480656729284). (-32.33446963249424@ -87.0430717441884). (57.91816782423318@ -41.44558073281318). (39.66493611803014@ -76.07962752549906). (77.93230939425497@5.419385881745582). (-69.25159776653548@ -32.73708840422655). (4.610659587814698@72.30962056673572). (-91.62325361102737@ -11.919890690387835). (-19.287428176096537@ -53.01502756481294). (5.750504537546112@ -23.523467318608176). (32.513585562287005@21.34365997370242). (70.77743976425991@40.782176512132175). (-66.8497494464371@55.93131308549673). (-36.665692368700824@27.75134465146806). (-52.62578042768019@ -78.87022922311459). (-10.963721279232619@ -89.0979345880265). (78.10482483005474@ -34.328117882349304). (68.86265870227328@ -59.99073039579607). (30.988214973855793@ -56.38930189547585). (23.194787144522333@ -89.12325188171897). (59.81808478922064@ -5.8440545311732865). (97.42109010758212@ -1.373342061274858). (-63.1947859637622@ -11.181787134804535). (-49.73916736500038@ -21.816303252876086). (-10.49746088544301@87.25938625861075). (21.66130271633641@85.29983538216666). (-98.60102185545328@8.68273975750693). (-78.92722114045554@6.91875924294493). (-40.95247965167202@ -54.644095463334665). (-25.732680489621295@ -31.986026632838836). (-4.44372938212735@ -4.3767932245306636). (25.557875569514447@ -15.936230910472633). (26.33544067515422@42.58785504183399). (11.160168008454821@24.27630378168977). (56.00868159956866@57.952420367099585). (76.98955309121966@61.14957043860566). (-58.8766805125466@76.27922958224977). (-45.18245972261805@62.47246694917919). (-18.069288207849475@38.788862990211285)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic02 [
	RSForceBasedLayout on: boxes.

	self assert: (boxes collect: #position as: Array) equals: {(0.454927162200802@ -44.54221403928398). (53.37581092890057@27.670211543492943). (-56.2859815804936@37.029480656729284). (-32.33446963249424@ -87.0430717441884). (57.91816782423318@ -41.44558073281318). (39.66493611803014@ -76.07962752549906). (77.93230939425497@5.419385881745582). (-69.25159776653548@ -32.73708840422655). (4.610659587814698@72.30962056673572). (-91.62325361102737@ -11.919890690387835). (-19.287428176096537@ -53.01502756481294). (5.750504537546112@ -23.523467318608176). (32.513585562287005@21.34365997370242). (70.77743976425991@40.782176512132175). (-66.8497494464371@55.93131308549673). (-36.665692368700824@27.75134465146806). (-52.62578042768019@ -78.87022922311459). (-10.963721279232619@ -89.0979345880265). (78.10482483005474@ -34.328117882349304). (68.86265870227328@ -59.99073039579607). (30.988214973855793@ -56.38930189547585). (23.194787144522333@ -89.12325188171897). (59.81808478922064@ -5.8440545311732865). (97.42109010758212@ -1.373342061274858). (-63.1947859637622@ -11.181787134804535). (-49.73916736500038@ -21.816303252876086). (-10.49746088544301@87.25938625861075). (21.66130271633641@85.29983538216666). (-98.60102185545328@8.68273975750693). (-78.92722114045554@6.91875924294493). (-40.95247965167202@ -54.644095463334665). (-25.732680489621295@ -31.986026632838836). (-4.44372938212735@ -4.3767932245306636). (25.557875569514447@ -15.936230910472633). (26.33544067515422@42.58785504183399). (11.160168008454821@24.27630378168977). (56.00868159956866@57.952420367099585). (76.98955309121966@61.14957043860566). (-58.8766805125466@76.27922958224977). (-45.18245972261805@62.47246694917919). (-18.069288207849475@38.788862990211285)}
]
