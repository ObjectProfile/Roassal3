Class {
	#name : #RSForceBasedLayoutTest,
	#superclass : #RSTest,
	#instVars : [
		'classes',
		'canvas'
	],
	#category : #'Roassal3-Global-Tests-Layouts'
}

{ #category : #running }
RSForceBasedLayoutTest >> setUp [
	super setUp.
	canvas := RSCanvas new.
	classes := Collection withAllSubclasses collect:[:cls |
		RSBox new model: cls; size: 10; yourself].
	RSLineBuilder line
		canvas: canvas;
		shapes: classes;
		color: (Color blue alpha: 0.5);
		connectFrom: #superclass to: #yourself.
	canvas addAll: classes.
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAddNodesAndEdges [

	RSForceBasedLayout new
		start;
		addNodes: classes;
		addEdges: canvas edges;
		step.
	
	self assert: (classes collect: #position as: Array) equals: {(-673.7270892774469@19.042646529786516). (-941.9653209004719@622.0124346519733). (-529.4021805548597@325.70586455605417). (760.0718896398199@182.25651146867327). (417.58978682281105@478.54727710510133). (-1859.0344790245294@ -1002.4095127839431). (-2375.65841170937@845.6138400501667). (-609.6872116363257@252.38731962874132). (696.4374393724447@122.4142530455731). (-179.48857619206353@1134.6703018813498). (-385.56178912529134@ -537.0343366573421). (-475.15274174132634@468.0141879459602). (647.0847373578831@1129.142233810222). (9.807147527259854@ -828.7105564848893). (-195.26207189204524@1670.2418341902953). (-443.3737879458691@566.8753614158762). (-1761.4994468706668@ -721.8068794642659). (808.9786702685569@1814.7033150789016). (532.6068294715924@ -649.4444282749146). (-105.41692200146292@ -879.9162041919179). (756.0945950960181@66.0637029347584). (-479.7294102958865@1667.4116291359926). (680.1036294219234@180.36880040055354). (1329.4000717380195@ -223.56170704756394). (-982.1214599200063@ -400.0865035204189). (759.9567217148408@ -538.9294013703332). (3.3420344522434693@ -1103.4277663213818). (158.76390589528577@ -1154.84302250569). (-234.70927403010566@ -719.277544952607). (475.06053904383907@ -327.15583381382015). (178.69501549367274@551.1027164229866). (490.96996490305594@ -420.0020091815783). (641.761148124007@1137.0414685888181). (652.2271139106568@ -150.23736304557355). (461.2143139174489@449.31423625151285). (27.540132494684762@ -1278.8088711173305). (717.4865133238571@ -548.3599235585998). (315.88268546219786@394.3110911586668). (-381.48503494398506@506.9313701749005). (-1674.4356985131221@893.0377077001792). (-151.54748707624165@ -709.3491416478633). (-563.0473109278954@390.1175613170597). (-1374.8159039469472@ -769.8052143288734). (-3208.4696402153495@ -853.5835290733551). (-1425.7467553884649@ -439.1979911763384). (-612.4852025119515@ -3604.999842184135). (2507.6171662171946@1853.9625049642852). (536.96779894502@321.73142541297295). (-544.6832789388402@ -759.5503882211128). (-638.9919260402916@ -1015.803022679437). (497.1351360783058@ -581.403995336447). (1831.8606645097236@690.5406561864929). (530.0689460198824@ -282.6663202011905). (-830.6352943644276@ -471.50238635675254). (-1005.3929301579531@854.3703502645172). (-1223.218135037518@ -333.480337882092). (1356.0311096552787@ -1718.1087064338974). (-238.1401171809962@ -800.1234849545336). (-460.70893273540474@438.6033103856874). (-853.554127931925@ -123.01339914118039). (979.9568240664013@240.5308139231081). (-676.3955030281077@32.07410153091812). (248.33677935695206@579.83444153876). (-1131.7206104831046@ -387.08364191413034). (-1491.419023626088@ -308.70021007792303). (-865.108591418741@ -60.58650404303056). (-80.66778587776302@675.5285410337063). (1503.185067552449@ -508.77147228916215). (-79.11489908515219@ -732.0996707507284). (-742.3546532391866@58.69070092691906). (478.25973807717395@1515.4135577187924). (-1703.577265326654@ -72.78124100944632). (-1267.5753983077204@ -716.7272421520935). (967.9948293750816@229.3438777044083). (1166.3935438316494@502.57939090682333). (378.3804876544992@536.1211864196752). (645.1792454918512@ -183.97855976238455). (789.9125003882208@23.574649681272092). (-7635.151092824193@ -2811.1534228941027). (224.4835651138555@637.4646183824358). (824.1079739446832@ -591.6229585712246). (656.088712075154@ -145.50610752752348). (44.744901325552924@ -936.319339935972). (-1240.9150903813475@252.5602009787896). (1885.2284442508742@ -1055.2936230233715). (-477.22375694474476@ -322.6559283690953). (454.95440059231765@ -538.902978418966). (-461.5447727572863@503.43079885177224). (-240.3909927719043@1073.9642827164012). (1672.697781335971@ -515.4778013985976). (520.5789568315246@ -280.8536713474151). (-962.3236293816348@269.2252804137136). (-353.35307201218535@1234.1991433320813). (-296.5880048404161@384.5426260321112). (660.4722812159962@124.94549192734742). (-412.37268379133656@ -516.3399139649727). (-909.356058770386@ -2258.169645434279). (90.07501809639763@ -1101.964409728327). (-255.5939687822385@ -730.9456376109965). (-867.994734445193@1058.4119629843433). (-818.821043078766@ -1193.9245104839786). (1485.3783095015056@ -1378.1586669838268). (212.05957074560715@1003.3397806255643). (486.8902933952185@391.99300386940286). (-304.71651965186356@340.94620816270185). (-332.0004110368878@ -542.4009262497609). (-9947.949581210634@ -1475.9047880572973). (919.7215710450852@25.04102596953599). (107.66135603872131@ -1006.4780854667107). (391.717092478857@ -633.9660387544861). (64.85356831445311@841.0503994930044). (-464.07294391330663@408.02450431556656). (-888.9576210136833@ -369.8699133930457). (-775.397026999534@ -621.0580911934497). (832.1768503947632@ -5.931427259480363). (-455.263382354141@413.23336809627165). (216.04492361893696@ -1638.0514854779613). (689.2835277732621@83.98142102355231). (-507.24131808027346@ -1023.4073232581237). (845.538793710512@ -700.9012949634592). (-642.1760844960556@88.81271408199882). (-698.7880260381859@7221.859075183477)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testAttributes [
	RSForceBasedLayout new
		length: 100;
		charge: -300;
		center: 200@200;
		on: classes.
	
	self assert: (classes collect: #position as: Array) equals: {(125.48130437499105@ -73.69344869656588). (267.11383373567577@233.34709768866145). (135.33357858368336@8.306658806802108). (294.4741319525528@ -41.40769677767203). (256.8942588787912@ -34.28818242799596). (331.0209031199822@42.89450149467032). (303.4553566981364@ -0.12685281825013972). (315.42656497945154@123.36973301353905). (153.1854347469098@ -29.152876359037776). (224.37771441297906@ -56.08792489339986). (337.41297636488645@83.76972658834256). (147.89719452169481@145.62797444368238). (341.8659787320749@ -5.635931640090678). (123.71908961124377@109.90341243099145). (67.76372069008329@117.85670388140502). (114.4381809866741@68.34647656544657). (102.84314341574706@31.770837134777636). (194.70578083849358@ -33.703816062635305). (384.72345319453285@38.54118913598303). (204.7743989982934@ -209.50172940044652). (-33.37866838194603@ -91.49925444569729). (263.104946026492@402.4780057016835). (362.9037647211644@173.06306503576744). (417.14858805314935@201.81459898518747). (139.02406784421817@258.0420896810837). (377.6055776370386@263.7210001471128). (376.9738646252229@220.14912530661815). (362.7654016558954@ -138.31808212758696). (94.44280006054663@ -132.88827742826882). (195.1800419618589@ -163.96858081758555). (427.99439588772077@ -91.7892783919225). (455.26078467840864@ -46.08339629909752). (-58.61201467956239@104.11478496874861). (-68.18143297246723@195.97766092128273). (-41.904099912249805@146.25755087793524). (-10.35194512636442@11.689635090088178). (530.7986313941533@3.176210561052649). (321.02905942084465@ -228.3895036592052). (248.68851216816273@ -308.87102009840737). (135.436076243857@ -292.036400517496). (297.8950925844805@ -276.6828439279734). (192.17620630903397@ -316.25703585699915). (-135.16088597502198@ -42.287791938452656). (-15.112181572244276@ -202.99619023998505). (-92.04325571815696@ -187.6688897235922). (-139.383378192105@ -124.12225425171317). (-131.86892322829118@0.4506653525327982). (-150.81169233811454@ -84.18156519700369). (24.07244897159381@ -185.61505679143738). (-54.931770056185925@ -202.91874840563978). (-122.30338606837178@ -161.06853721168255). (219.59732084425733@518.345451647006). (334.35044769770894@521.8116258369453). (414.5502939421742@397.0247358309283). (316.17611400227423@314.5282082775471). (167.7526645694419@443.567018831714). (343.37501987698886@471.77493595400824). (142.48625446897927@401.04141377690553). (180.11248024711873@486.5459271594994). (370.3474324801986@386.9137909640422). (209.0872843429518@317.2976212803077). (167.16792824970918@358.54570658161384). (110.95008541643074@462.7099468999445). (276.1814062618228@507.9267566444991). (369.1123200507186@434.6823132994023). (359.431456383484@346.6073554673112). (534.9910989696226@221.15118181787852). (535.3374990230765@174.73025277856476). (513.0750682403424@132.43888167576375). (188.55641586214145@172.2192086375865). (32.239460802895735@221.79230133737954). (19.483211923695784@261.45533293860444). (25.027241051529@298.0957077444975). (50.318967527858476@328.68299720740686). (226.85977599774392@213.28580250215086). (-168.21599170073785@140.75452087584785). (-179.2495189348113@229.98237422844818). (-163.8625273125498@281.334094535772). (630.2030253267108@51.09133393500331). (587.2706740978008@ -89.48200423826273). (634.1511030092536@ -30.7839908246048). (436.18779757840093@ -232.19102442258642). (403.52035289097796@ -302.79981901330297). (-238.5256829886838@3.6395637739693623). (-235.27627584746065@77.9129892358086). (-260.1460259283828@ -74.13334404288857). (117.14567584789198@570.0426194955688). (134.41412744686636@605.3909364644319). (169.69074346631868@624.7109195856094). (219.19885418084928@627.5525872326494). (442.41037307211343@586.7898730770535). (385.0572656513396@617.6667847402692). (442.8435341808095@545.0863623257579). (447.17260582342@499.92363522350104). (313.583621012112@639.4597275627597). (526.9193962755303@376.5085782478416). (549.0450031881583@410.9271445484608). (513.8569342602497@332.62660310887736). (20.359781192602746@401.5877374011301). (70.91468943150757@542.7753307948882). (-23.02572265777903@486.04538339000123). (-6.399013506175994@450.3253333190912). (-7.158792847393178@543.1155695284771). (-255.80382331870643@343.01084365114934). (700.524669857361@131.60939690890118). (717.7114105403577@29.70918271634237). (-327.4988534532804@130.1347077287916). (-285.74095274015605@176.04627440402962). (524.2948987721044@652.1619466048069). (556.6070852898852@571.4386329462385). (256.7048875238163@734.4923859660784). (390.0583246755067@713.2452290138301). (218.100262960851@704.2451960747376). (316.24494283390237@745.4793108949506). (659.5569829298424@400.61125278098297). (641.3648367917875@340.7561766881295). (-141.04648697167625@462.89401265613554). (-122.68307556780329@535.9166604562266). (-109.35962416590728@590.6321263694683). (-61.70396740813669@637.421374980891). (644.8023460372297@513.4177787498281). (223.77011479431647@70.50395243877816)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic [
	RSForceBasedLayout new
		doNotUseProgressBar;
		on: classes.
		
	self assert: (classes collect: #position as: Array) equals: {(-34.82933921391154@ -78.47354788433849). (23.593828856506594@10.151621982018147). (-20.752221212271007@ -17.599842214509863). (25.708542912226225@ -56.125739443431435). (-9.730149059507863@ -60.697342609722725). (24.32877926681013@ -35.79259947089757). (17.84665688910766@ -23.50414603597801). (4.72959071109528@ -58.600527459321114). (-23.039248614872427@ -57.47633809746822). (17.017893855887625@ -65.38399469716086). (-22.962618738790674@ -46.1874718738685). (19.46891537309489@ -46.71756805714558). (2.3211469846146935@ -71.05647192523583). (-10.762970079144061@ -12.006941986472695). (-44.26703626373542@ -16.690621449636932). (-25.431927247758413@ -28.236866497929835). (-33.1970399033042@ -38.49062691786128). (2.958398957618485@ -12.90180624041988). (43.1125573684034@ -58.909247402730784). (-24.495502247585417@ -120.81351113946708). (-80.35916512804788@ -83.12809119365517). (11.477988206908451@64.52835415628216). (42.601846218283505@22.934932428301916). (59.72198650251423@17.844918126976708). (63.22070876920992@ -7.409538889768571). (46.581028572424216@5.901875268265877). (39.652698325032404@ -7.317559076620238). (51.197019387773175@ -76.99437944174785). (-47.869127925495874@ -68.6390628892909). (37.329922297423316@ -91.31640805036331). (3.2797501572042402@ -99.05298960672792). (17.9232197893058@ -97.06218471833772). (-76.92555799739588@ -15.38438570735938). (-82.17996917030742@4.817947094572558). (-64.8017273813883@ -0.6855674393491277). (-61.82479337618992@ -39.08227821167308). (86.04945271994283@ -81.1262319076126). (0.30782927713193753@ -141.83245499626972). (-15.603470713219304@ -143.6991854094542). (-2.074750662124203@ -130.14420987233186). (-27.051309187017804@ -149.39844877990993). (-41.190459618186516@ -139.46995175502522). (-109.11344751718079@ -78.45700119461847). (-73.85678172177808@ -108.65670778728882). (-103.28431170584821@ -88.32960407254562). (-93.16127849775857@ -63.496243867663324). (-110.15416704450341@ -63.360063999432775). (-104.75238391703081@ -101.18933074979395). (-64.48317591761065@ -100.63519014114081). (-84.70511241730495@ -110.30989952152808). (-93.51080555471701@ -104.36180444102607). (-8.977344570341847@93.20353386721344). (30.980734856559657@102.19692823794401). (53.45026372920025@67.74404272514133). (28.443266205918952@82.17093929796236). (16.22182793081157@88.84528933638761). (34.82988174677768@57.079549851887805). (-17.024989606043818@52.59447818794834). (-18.86097957193099@64.9896233918915). (-5.652124951785261@47.66751283492654). (6.795610539827538@41.675490849236965). (-9.568551182758146@75.94257130668723). (-34.03482148259931@80.01105688774115). (3.7502294369668174@87.48767568621355). (35.22756989457584@71.37682222237818). (24.86633348207853@45.936530523236996). (82.83358773276333@32.58097566750411). (91.53700527348005@24.905649418561374). (88.46056502149692@15.082803988528642). (97.78434775269027@ -9.624977148778038). (84.8699702235506@ -28.261724562673812). (87.67034669956135@ -14.116678618586967). (74.98205113605263@ -32.71101599280909). (91.53886928196914@ -0.7392481453071741). (94.02035595384669@ -22.377906563387583). (-105.23424379351523@ -12.64192545320679). (-108.91606947478715@10.152826683140576). (-109.97424029753593@24.00560245540133). (114.12674732844545@ -77.30023682543963). (93.6339784611216@ -105.37788614236094). (108.98202059760244@ -95.71578441265082). (24.958441615687306@ -154.31761994330284). (-15.099518942145911@ -171.66269021907016). (-135.86217654573062@ -77.71091131903299). (-137.5079395886408@ -45.75833898269322). (-123.92405551740329@ -117.95984009154017). (-31.112905852530595@114.25341526600411). (-34.70886031153432@103.70488713714707). (-22.34284908431523@119.91061534099514). (-10.783978306858325@120.76120391985768). (65.21393812822951@118.37791871999524). (36.15346941645656@126.5143966471262). (48.75626226288867@121.53812880330618). (56.02779404102675@105.4866837831746). (24.11796793996073@136.07594764783406). (77.90014219400427@80.32674516402425). (94.12591971518165@68.14589353303623). (79.65817542534472@64.34403926451623). (-45.12978077793681@43.76504967893635). (-48.888504968193224@62.48443970643536). (-69.09598186908285@76.45969130688218). (-57.94951586167366@90.64691346169676). (-69.37272027331747@100.49724059683855). (-134.4474191738071@34.98816845046256). (138.24348597385077@ -69.12035181101254). (132.1491448136697@ -100.72797218565857). (-160.32371458163857@ -38.546686006852454). (-150.506249216588@ -24.172173843448792). (91.54903205897325@117.40510550390543). (91.32181886800575@132.5085188151669). (13.903294333971731@160.6994790280984). (41.99582623563593@155.11002470088096). (3.009818005736225@153.10443035153162). (28.149832200516713@161.77753163435892). (121.78038903762254@72.80432495563568). (121.62698578500844@58.330022694916345). (-98.31965878173632@74.35331774393516). (-96.94779102279956@99.06528710012626). (-94.0840934433985@112.54008455017357). (-83.36206569199535@123.12643625797655). (116.73901564104865@129.18609521373347). (-1.8829727376842935@ -36.00511022917524)}
]

{ #category : #tests }
RSForceBasedLayoutTest >> testBasic02 [
	RSForceBasedLayout on: classes.

	self assert: (classes collect: #position as: Array) equals: {(-34.82933921391154@ -78.47354788433849). (23.593828856506594@10.151621982018147). (-20.752221212271007@ -17.599842214509863). (25.708542912226225@ -56.125739443431435). (-9.730149059507863@ -60.697342609722725). (24.32877926681013@ -35.79259947089757). (17.84665688910766@ -23.50414603597801). (4.72959071109528@ -58.600527459321114). (-23.039248614872427@ -57.47633809746822). (17.017893855887625@ -65.38399469716086). (-22.962618738790674@ -46.1874718738685). (19.46891537309489@ -46.71756805714558). (2.3211469846146935@ -71.05647192523583). (-10.762970079144061@ -12.006941986472695). (-44.26703626373542@ -16.690621449636932). (-25.431927247758413@ -28.236866497929835). (-33.1970399033042@ -38.49062691786128). (2.958398957618485@ -12.90180624041988). (43.1125573684034@ -58.909247402730784). (-24.495502247585417@ -120.81351113946708). (-80.35916512804788@ -83.12809119365517). (11.477988206908451@64.52835415628216). (42.601846218283505@22.934932428301916). (59.72198650251423@17.844918126976708). (63.22070876920992@ -7.409538889768571). (46.581028572424216@5.901875268265877). (39.652698325032404@ -7.317559076620238). (51.197019387773175@ -76.99437944174785). (-47.869127925495874@ -68.6390628892909). (37.329922297423316@ -91.31640805036331). (3.2797501572042402@ -99.05298960672792). (17.9232197893058@ -97.06218471833772). (-76.92555799739588@ -15.38438570735938). (-82.17996917030742@4.817947094572558). (-64.8017273813883@ -0.6855674393491277). (-61.82479337618992@ -39.08227821167308). (86.04945271994283@ -81.1262319076126). (0.30782927713193753@ -141.83245499626972). (-15.603470713219304@ -143.6991854094542). (-2.074750662124203@ -130.14420987233186). (-27.051309187017804@ -149.39844877990993). (-41.190459618186516@ -139.46995175502522). (-109.11344751718079@ -78.45700119461847). (-73.85678172177808@ -108.65670778728882). (-103.28431170584821@ -88.32960407254562). (-93.16127849775857@ -63.496243867663324). (-110.15416704450341@ -63.360063999432775). (-104.75238391703081@ -101.18933074979395). (-64.48317591761065@ -100.63519014114081). (-84.70511241730495@ -110.30989952152808). (-93.51080555471701@ -104.36180444102607). (-8.977344570341847@93.20353386721344). (30.980734856559657@102.19692823794401). (53.45026372920025@67.74404272514133). (28.443266205918952@82.17093929796236). (16.22182793081157@88.84528933638761). (34.82988174677768@57.079549851887805). (-17.024989606043818@52.59447818794834). (-18.86097957193099@64.9896233918915). (-5.652124951785261@47.66751283492654). (6.795610539827538@41.675490849236965). (-9.568551182758146@75.94257130668723). (-34.03482148259931@80.01105688774115). (3.7502294369668174@87.48767568621355). (35.22756989457584@71.37682222237818). (24.86633348207853@45.936530523236996). (82.83358773276333@32.58097566750411). (91.53700527348005@24.905649418561374). (88.46056502149692@15.082803988528642). (97.78434775269027@ -9.624977148778038). (84.8699702235506@ -28.261724562673812). (87.67034669956135@ -14.116678618586967). (74.98205113605263@ -32.71101599280909). (91.53886928196914@ -0.7392481453071741). (94.02035595384669@ -22.377906563387583). (-105.23424379351523@ -12.64192545320679). (-108.91606947478715@10.152826683140576). (-109.97424029753593@24.00560245540133). (114.12674732844545@ -77.30023682543963). (93.6339784611216@ -105.37788614236094). (108.98202059760244@ -95.71578441265082). (24.958441615687306@ -154.31761994330284). (-15.099518942145911@ -171.66269021907016). (-135.86217654573062@ -77.71091131903299). (-137.5079395886408@ -45.75833898269322). (-123.92405551740329@ -117.95984009154017). (-31.112905852530595@114.25341526600411). (-34.70886031153432@103.70488713714707). (-22.34284908431523@119.91061534099514). (-10.783978306858325@120.76120391985768). (65.21393812822951@118.37791871999524). (36.15346941645656@126.5143966471262). (48.75626226288867@121.53812880330618). (56.02779404102675@105.4866837831746). (24.11796793996073@136.07594764783406). (77.90014219400427@80.32674516402425). (94.12591971518165@68.14589353303623). (79.65817542534472@64.34403926451623). (-45.12978077793681@43.76504967893635). (-48.888504968193224@62.48443970643536). (-69.09598186908285@76.45969130688218). (-57.94951586167366@90.64691346169676). (-69.37272027331747@100.49724059683855). (-134.4474191738071@34.98816845046256). (138.24348597385077@ -69.12035181101254). (132.1491448136697@ -100.72797218565857). (-160.32371458163857@ -38.546686006852454). (-150.506249216588@ -24.172173843448792). (91.54903205897325@117.40510550390543). (91.32181886800575@132.5085188151669). (13.903294333971731@160.6994790280984). (41.99582623563593@155.11002470088096). (3.009818005736225@153.10443035153162). (28.149832200516713@161.77753163435892). (121.78038903762254@72.80432495563568). (121.62698578500844@58.330022694916345). (-98.31965878173632@74.35331774393516). (-96.94779102279956@99.06528710012626). (-94.0840934433985@112.54008455017357). (-83.36206569199535@123.12643625797655). (116.73901564104865@129.18609521373347). (-1.8829727376842935@ -36.00511022917524)}
]
